# Phase 4.5: 実装コードレビュー

## 目的
AIレビュー改善ナレッジベースから過去の指摘事項を学習し、実装されたコードが、安全性・パフォーマンス・保守性の観点からプロダクションレベルの品質を満たしているか、コミット前にプロアクティブに検証する。**複雑性を排除し、シンプルで持続可能なコード（ミニマリストなコード）**を維持することを最重要視する

## Claude実行項目

### 1. 【自己学習ステップ】
CI/CDプロセスの一部として、中央リポジトリ（ai-review-knowledge-base）から最新のナレッジベースを取得する

### 2. ナレッジベースのチェックリスト統合
取得したナレッジベースのチェックリスト項目を、今回のレビュー観点に加える

### 3. 【ESLint必須実行ステップ】
レビュー実行前に、まずローカルでESLint等の静的解析ツールを最大レベルで実行し、その出力結果をレビューの必須インプットとする

```bash
# ESLint実行 (Termux最適化版)
npx eslint [target_files] --max-warnings=0
# 結果を必須レビューインプットとして記録
```

- これにより、AIが「偽装」する余地をなくし、機械的なチェックを強制する
- ESLintの出力結果なしにはレビュー評価を行えない仕組みを確立

### 4. レビュー実行
結果を以下の厳格なフォーマットで「コードレビューレポート」として出力する。サマリーや要約は認められない

### 5. 品質ゲートの判定
レポート内に一つでも 🔴 Critical が含まれる場合、Phase 5への移行を中止し、即座にコード修正に戻る

## 【コードレビューレポート必須形式】

```
# 📝 コードレビューレポート ({Issue番号})

## 1. セキュリティ
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

## 2. バグ
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

## 3. パフォーマンス
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

## 4. コード品質 (ミニマリズム)
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

## 5. 可読性・保守性
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

## 6. ベストプラクティス
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

## 7. 機能要件
- **評価:** 🟢 Pass / 🟡 Major / 🔴 Critical
- **根拠:** (なぜこの評価なのか、具体的なコード箇所を挙げて説明)

---
## 総合判定
- **判定:** 承認 / 要修正
- **理由:** (なぜ承認できるのか、あるいはなぜ修正が必要なのかを総括)
```

## 品質ゲート判定
レポート内に一つでも 🔴 Critical が含まれる場合、Phase 5への移行を中止し、即座にコード修正に戻る

## 完了条件
- ナレッジベースが取得され、チェックリストが統合されている
- ESLintが実行され、結果が記録されている
- 7項目すべてのコードレビューが完了している
- コードレビューレポートが作成されている
- 🔴 Critical項目が0個である

## 次のフェーズ
Phase 5: デプロイ準備と一次報告